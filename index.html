<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TCDS — Índice Canónico de DOIs</title>
    
    <script type="application/ld+json" src="tcds_indice_doi.jsonld"></script>

    <style>
        body { font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; max-width: 980px; margin: 20px auto; padding: 0 15px; background: #f9f9f9; color: #222; }
        header { border-bottom: 2px solid #ddd; padding-bottom: 15px; }
        h1 { margin: 0; color: #000; }
        .meta { color: #555; font-size: 0.9em; }
        #listado { margin-top: 20px; }
        .card { background: #fff; border: 1px solid #ddd; border-radius: 8px; padding: 15px; margin-bottom: 12px; box-shadow: 0 2px 4px rgba(0,0,0,0.05); }
        .card-title { font-size: 1.1em; font-weight: 600; margin: 0 0 8px 0; }
        .card-doi { font-family: monospace; background: #eee; padding: 2px 5px; border-radius: 4px; }
        .card-link { display: inline-block; background: #333; color: #fff; padding: 6px 10px; border-radius: 5px; text-decoration: none; font-weight: 500; margin-top: 10px; font-size: 0.9em; }
        .card-link:hover { background: #000; }
        footer { margin-top: 30px; text-align: center; font-size: 0.85em; color: #777; }
    </style>
</head>

<body>

    <header>
        <h1>Índice Canónico TCDS</h1>
        <p class="meta">El "Faro" (Beacon) y "Libro Mayor" del paradigma de la Teoría Cromodinámica Sincrónica (TCDS).<br>
        <strong>Autor:</strong> Genaro Carrasco Ozuna (ORCID: 0009-0005-6358-9910)
        </p>
    </header>

    <main id="listado">
        <p>Cargando manifiesto de publicaciones TCDS...</p>
    </main>

    <footer>
        <p>Este índice se genera automáticamente desde el manifiesto `tcds_indice_doi.jsonld`.<br>
        Es un activo $Q$-driven del Proyecto TCDS.</p>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const listadoDiv = document.getElementById('listado');
            
            // Carga el manifiesto (el "Sustrato Σ")
            fetch('tcds_indice_doi.jsonld')
                .then(response => response.json())
                .then(data => {
                    listadoDiv.innerHTML = ''; // Limpiar el mensaje "Cargando..."
                    
                    // Verifica que el catálogo y el dataset existan
                    if (data && data.dataset && data.dataset.length > 0) {
                        
                        // Itera sobre cada publicación en el manifiesto
                        data.dataset.forEach(item => {
                            // Crea la "tarjeta" HTML para el humano
                            const card = document.createElement('div');
                            card.className = 'card';
                            
                            let html = `<h3 class="card-title">${item.name}</h3>`;
                            
                            if (item['@id']) {
                                const doi = item['@id'].replace('https://doi.org/', '');
                                html += `<div class="meta"><strong>DOI:</strong> <span class="card-doi">${doi}</span></div>`;
                            }
                            if (item.author && item.author.name) {
                                html += `<div class="meta"><strong>Autor:</strong> ${item.author.name}</div>`;
                            }
                            
                            html += `<a href="${item['@id']}" class="card-link" target="_blank" rel="noopener noreferrer">Ver en Zenodo</a>`;
                            
                            card.innerHTML = html;
                            listadoDiv.appendChild(card);
                        });

                    } else {
                        listadoDiv.innerHTML = '<p>Error: El manifiesto de metadatos está vacío o corrupto.</p>';
                    }
                })
                .catch(error => {
                    console.error('Fricción Paradigmática (Error): No se pudo cargar el JSON-LD.', error);
                    listadoDiv.innerHTML = '<p><strong>Error de Carga ($\phi$):</strong> No se pudo cargar el manifiesto. Verifique la consola.</p>';
                });
        });
    </script>

</body>
</html>
